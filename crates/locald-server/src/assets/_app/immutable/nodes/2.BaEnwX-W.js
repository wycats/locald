import{c as ha,l as wa,m as $a,a as k,d as U,f as G,o as B,t as rt,j as ba}from"../chunks/CzTj0oKo.js";import{w as Ke,d as xa,o as pt,g as St}from"../chunks/COZeDKnD.js";import{a as We,H as Ft,aZ as Rt,S as xe,h as H,a0 as Dt,I as qe,l,at as $e,ai as ya,K as ka,U as Et,a4 as Pe,e as _e,J as Sa,a9 as Ea,R as Ct,c as be,a_ as ce,b as dt,s as Ca,C as Nt,am as ze,a7 as _t,aN as Na,a$ as Aa,b0 as Ta,b1 as Ma,r as Ht,p as Gt,b2 as it,F as Vt,a2 as za,b3 as La,a6 as Pa,d as Ia,G as Bt,X as Ut,b4 as Oa,aK as Fa,ag as Ra,i as O,b5 as Da,b6 as Ha,b7 as Ga,aG as Wt,ay as Va,ab as Ae,b8 as Ba,b9 as Ua,ak as Wa,ba as qa,aE as Ja,D as Ka,bb as Xa,t as ye,x as ke,y as _,n as Te,A as S,z as f,v as R,aF as pe,bc as Ya,bd as Za,be as Qa,w as ae,an as j,bf as ja,T as oe,g as en,aD as mt,ar as qt}from"../chunks/BHlkUKrU.js";import{l as q,p as ne,s as Y,a as Jt,c as vt,i as se,_ as At,b as tn}from"../chunks/DlQFc35Y.js";import{i as Kt}from"../chunks/IN79Gb6M.js";import{a as an,b as Ve,s as X}from"../chunks/CNtBeHb_.js";import{a as Tt,b as ie,s as Me,r as nn}from"../chunks/Bc8zOjvW.js";import{B as sn}from"../chunks/CXI1Llue.js";function rn(e,t){return t}function on(e,t,n){for(var s=[],o=t.length,i,a=t.length,r=0;r<o;r++){let $=t[r];Gt($,()=>{if(i){if(i.pending.delete($),i.done.add($),i.pending.size===0){var m=e.outrogroups;ut(_t(i.done)),m.delete(i),m.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var d=s.length===0&&n!==null;if(d){var u=n,c=u.parentNode;Pa(c),c.append(u),e.items.clear()}ut(t,!d)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function ut(e,t=!0){for(var n=0;n<e.length;n++)Ia(e[n],t)}var Mt;function Je(e,t,n,s,o,i=null){var a=e,r=new Map,d=(t&Rt)!==0;if(d){var u=e;a=H?xe(Dt(u)):u.appendChild(We())}H&&qe();var c=null,$=$e(()=>{var h=n();return Na(h)?h:h==null?[]:_t(h)}),m,g=!0;function x(){v.fallback=c,ln(v,m,a,t,s),c!==null&&(m.length===0?(c.f&ce)===0?Ht(c):(c.f^=ce,Le(c,null,a)):Gt(c,()=>{c=null}))}var w=Ft(()=>{m=l($);var h=m.length;let N=!1;if(H){var z=ya(a)===ka;z!==(h===0)&&(a=Et(),xe(a),Pe(!1),N=!0)}for(var L=new Set,E=be,T=Ca(),A=0;A<h;A+=1){H&&_e.nodeType===Sa&&_e.data===Ea&&(a=_e,N=!0,Pe(!1));var M=m[A],F=s(M,A),P=g?null:r.get(F);P?(P.v&&Ct(P.v,M),P.i&&Ct(P.i,A),T&&E.skipped_effects.delete(P.e)):(P=cn(r,g?a:Mt??=We(),M,F,A,o,t,n),g||(P.e.f|=ce),r.set(F,P)),L.add(F)}if(h===0&&i&&!c&&(g?c=dt(()=>i(a)):(c=dt(()=>i(Mt??=We())),c.f|=ce)),H&&h>0&&xe(Et()),!g)if(T){for(const[fe,p]of r)L.has(fe)||E.skipped_effects.add(p.e);E.oncommit(x),E.ondiscard(()=>{})}else x();N&&Pe(!0),l($)}),v={effect:w,items:r,outrogroups:null,fallback:c};g=!1,H&&(a=_e)}function ln(e,t,n,s,o){var i=(s&La)!==0,a=t.length,r=e.items,d=e.effect.first,u,c=null,$,m=[],g=[],x,w,v,h;if(i)for(h=0;h<a;h+=1)x=t[h],w=o(x,h),v=r.get(w).e,(v.f&ce)===0&&(v.nodes?.a?.measure(),($??=new Set).add(v));for(h=0;h<a;h+=1){if(x=t[h],w=o(x,h),v=r.get(w).e,e.outrogroups!==null)for(const P of e.outrogroups)P.pending.delete(v),P.done.delete(v);if((v.f&ce)!==0)if(v.f^=ce,v===d)Le(v,null,n);else{var N=c?c.next:d;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),ue(e,c,v),ue(e,v,N),Le(v,N,n),c=v,m=[],g=[],d=c.next;continue}if((v.f&it)!==0&&(Ht(v),i&&(v.nodes?.a?.unfix(),($??=new Set).delete(v))),v!==d){if(u!==void 0&&u.has(v)){if(m.length<g.length){var z=g[0],L;c=z.prev;var E=m[0],T=m[m.length-1];for(L=0;L<m.length;L+=1)Le(m[L],z,n);for(L=0;L<g.length;L+=1)u.delete(g[L]);ue(e,E.prev,T.next),ue(e,c,E),ue(e,T,z),d=z,c=T,h-=1,m=[],g=[]}else u.delete(v),Le(v,d,n),ue(e,v.prev,v.next),ue(e,v,c===null?e.effect.first:c.next),ue(e,c,v),c=v;continue}for(m=[],g=[];d!==null&&d!==v;)(u??=new Set).add(d),g.push(d),d=d.next;if(d===null)continue}(v.f&ce)===0&&m.push(v),c=v,d=v.next}if(e.outrogroups!==null){for(const P of e.outrogroups)P.pending.size===0&&(ut(_t(P.done)),e.outrogroups?.delete(P));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||u!==void 0){var A=[];if(u!==void 0)for(v of u)(v.f&it)===0&&A.push(v);for(;d!==null;)(d.f&it)===0&&d!==e.fallback&&A.push(d),d=d.next;var M=A.length;if(M>0){var F=(s&Rt)!==0&&a===0?n:null;if(i){for(h=0;h<M;h+=1)A[h].nodes?.a?.measure();for(h=0;h<M;h+=1)A[h].nodes?.a?.fix()}on(e,A,F)}}i&&Vt(()=>{if($!==void 0)for(v of $)v.nodes?.a?.apply()})}function cn(e,t,n,s,o,i,a,r){var d=(a&Aa)!==0?(a&Ta)===0?ze(n,!1,!1):Nt(n):null,u=(a&Ma)!==0?Nt(o):null;return{v:d,i:u,e:dt(()=>(i(t,d??n,u??o,r),()=>{e.delete(s)}))}}function Le(e,t,n){if(e.nodes)for(var s=e.nodes.start,o=e.nodes.end,i=t&&(t.f&ce)===0?t.nodes.start:n;s!==null;){var a=za(s);if(i.before(s),s===o)return;s=a}}function ue(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function J(e,t,n,s,o){H&&qe();var i=t.$$slots?.[n],a=!1;i===!0&&(i=t.children,a=!0),i===void 0||i(e,a?()=>s:s)}const dn=()=>performance.now(),le={tick:e=>requestAnimationFrame(e),now:()=>dn(),tasks:new Set};function Xt(){const e=le.now();le.tasks.forEach(t=>{t.c(e)||(le.tasks.delete(t),t.f())}),le.tasks.size!==0&&le.tick(Xt)}function vn(e){let t;return le.tasks.size===0&&le.tick(Xt),{promise:new Promise(n=>{le.tasks.add(t={c:e,f:n})}),abort(){le.tasks.delete(t)}}}function Be(e,t){Wt(()=>{e.dispatchEvent(new CustomEvent(t))})}function un(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function zt(e){const t={},n=e.split(";");for(const s of n){const[o,i]=s.split(":");if(!o||i===void 0)break;const a=un(o.trim());t[a]=i.trim()}return t}const fn=e=>e;function Lt(e,t,n,s){var o=(e&Ha)!==0,i=(e&Ga)!==0,a=o&&i,r=(e&Da)!==0,d=a?"both":o?"in":"out",u,c=t.inert,$=t.style.overflow,m,g;function x(){return Wt(()=>u??=n()(t,s?.()??{},{direction:d}))}var w={is_global:r,in(){if(t.inert=c,!o){g?.abort(),g?.reset?.();return}i||m?.abort(),Be(t,"introstart"),m=ft(t,x(),g,1,()=>{Be(t,"introend"),m?.abort(),m=u=void 0,t.style.overflow=$})},out(z){if(!i){z?.(),u=void 0;return}t.inert=!0,Be(t,"outrostart"),g=ft(t,x(),m,0,()=>{Be(t,"outroend"),z?.()})},stop:()=>{m?.abort(),g?.abort()}},v=Bt;if((v.nodes.t??=[]).push(w),o&&an){var h=r;if(!h){for(var N=v.parent;N&&(N.f&Ut)!==0;)for(;(N=N.parent)&&(N.f&Oa)===0;);h=!N||(N.f&Fa)!==0}h&&Ra(()=>{O(()=>w.in())})}}function ft(e,t,n,s,o){var i=s===1;if(Va(t)){var a,r=!1;return Vt(()=>{if(!r){var v=t({direction:i?"in":"out"});a=ft(e,v,n,s,o)}}),{abort:()=>{r=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n?.deactivate(),!t?.duration)return o(),{abort:Ae,deactivate:Ae,reset:Ae,t:()=>s};const{delay:d=0,css:u,tick:c,easing:$=fn}=t;var m=[];if(i&&n===void 0&&(c&&c(0,1),u)){var g=zt(u(0,1));m.push(g,g)}var x=()=>1-s,w=e.animate(m,{duration:d,fill:"forwards"});return w.onfinish=()=>{w.cancel();var v=n?.t()??1-s;n?.abort();var h=s-v,N=t.duration*Math.abs(h),z=[];if(N>0){var L=!1;if(u)for(var E=Math.ceil(N/16.666666666666668),T=0;T<=E;T+=1){var A=v+h*$(T/E),M=zt(u(A,1-A));z.push(M),L||=M.overflow==="hidden"}L&&(e.style.overflow="hidden"),x=()=>{var F=w.currentTime;return v+h*$(F/N)},c&&vn(()=>{if(w.playState!=="running")return!1;var F=x();return c(F,1-F),!0})}w=e.animate(z,{duration:N,fill:"forwards"}),w.onfinish=()=>{x=()=>s,c?.(s,1-s),o()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Ae)},deactivate:()=>{o=Ae},reset:()=>{s===0&&c?.(1,0)},t:()=>x()}}function pn(e,t,n,s,o,i){let a=H;H&&qe();var r=null;H&&_e.nodeType===Ba&&(r=_e,qe());var d=H?_e:e,u=new sn(d,!1);Ft(()=>{const c=t()||null;var $=Ua;if(c===null){u.ensure(null,null),Ve(!0);return}return u.ensure(c,m=>{if(c){if(r=H?r:document.createElementNS($,c),ha(r,r),s){H&&wa(c)&&r.append(document.createComment(""));var g=H?Dt(r):r.appendChild(We());H&&(g===null?Pe(!1):xe(g)),s(r,g)}Bt.nodes.end=r,m.before(r)}H&&xe(m)}),Ve(!0),()=>{c&&Ve(!1)}},Ut),Wa(()=>{Ve(!0)}),a&&(Pe(!0),xe(d))}function _n(e,t,n=t){var s=new WeakSet;qa(e,"input",async o=>{var i=o?e.defaultValue:e.value;if(i=ot(e)?lt(i):i,n(i),be!==null&&s.add(be),await Ja(),i!==(i=t())){var a=e.selectionStart,r=e.selectionEnd,d=e.value.length;if(e.value=i??"",r!==null){var u=e.value.length;a===r&&r===d&&u>d?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(r,u))}}}),(H&&e.defaultValue!==e.value||O(t)==null&&e.value)&&(n(ot(e)?lt(e.value):e.value),be!==null&&s.add(be)),Ka(()=>{var o=t();if(e===document.activeElement){var i=Xa??be;if(s.has(i))return}ot(e)&&o===lt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ot(e){var t=e.type;return t==="number"||t==="range"}function lt(e){return e===""?null:+e}function Ue(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}const mn=1e3,gn=5e3,Yt=Ke(null);function hn(){const{subscribe:e,update:t,set:n}=Ke([]);return{subscribe:e,set:n,addLog:s=>{t(o=>{const i=[...o,s];return i.length>gn&&i.shift(),i})},clear:()=>n([])}}const Zt=hn();function wn(){const{subscribe:e,update:t}=Ke({});return{subscribe:e,addLog:n=>{Yt.set(n),t(s=>{const i=[...s[n.service]||[],n];return i.length>mn&&i.shift(),{...s,[n.service]:i}}),Zt.addLog(n)}}}const Qt=wn();async function $n(){const e=await fetch("/api/state");if(!e.ok)throw new Error("Failed to fetch services");return e.json()}async function Pt(e){if(!(await fetch(`/api/services/${e}/start`,{method:"POST"})).ok)throw new Error(`Failed to start service ${e}`)}async function It(e){if(!(await fetch(`/api/services/${e}/stop`,{method:"POST"})).ok)throw new Error(`Failed to stop service ${e}`)}async function bn(e){if(!(await fetch(`/api/services/${e}/restart`,{method:"POST"})).ok)throw new Error(`Failed to restart service ${e}`)}function xn(){const e=new EventSource("/api/events");return e.onmessage=t=>{try{const n=JSON.parse(t.data);n.type==="Log"?Qt.addLog(n.data):n.type==="ServiceUpdate"&&(console.log("Received ServiceUpdate:",n.data.name,n.data.status),Xe.updateService(n.data))}catch(n){console.error("Failed to parse event",n)}},e.onopen=()=>{console.log("EventSource connected"),typeof document<"u"&&document.body.setAttribute("data-sse-connected","true")},e.onerror=t=>{console.error("EventSource error",t),typeof document<"u"&&document.body.setAttribute("data-sse-connected","false")},()=>{e.close()}}function yn(){const{subscribe:e,set:t,update:n}=Ke([]);return{subscribe:e,set:t,update:n,refresh:async()=>{const s=await $n();t(s)},updateService:s=>{n(o=>{const i=o.findIndex(a=>a.name===s.name);if(i!==-1){const a=[...o];return a[i]=s,a}else return[...o,s].sort((r,d)=>r.name.localeCompare(d.name))})},handleEvent:s=>{if(s.type==="ServiceUpdate"){const o=s.data;n(i=>{const a=i.findIndex(r=>r.name===o.name);if(a!==-1){const r=[...i],d=r[a];return r[a]={...o,metrics:d.metrics,cpu_history:d.cpu_history},r}else return[...i,o].sort((d,u)=>d.name.localeCompare(u.name))})}else if(s.type==="Metrics"){const o=s.data;n(i=>{const a=i.findIndex(r=>r.name===o.name);if(a!==-1){const r=[...i],d=r[a],u=d.cpu_history?[...d.cpu_history]:Array(20).fill(0);return u.push(o.cpu_percent),u.length>20&&u.shift(),r[a]={...d,metrics:o,cpu_history:u},r}return i})}}}}const Xe=yn(),jt=xa(Xe,e=>{const t={};for(const n of e){const s=n.name.split(":"),o=s.length>1?s[0]:"default";t[o]||(t[o]=[]),t[o].push(n)}return Object.entries(t).map(([n,s])=>({name:n,services:s}))});const kn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Sn=$a("<svg><!><!></svg>");function Z(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]),s=q(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ye(t,!1);let o=ne(t,"name",8,void 0),i=ne(t,"color",8,"currentColor"),a=ne(t,"size",8,24),r=ne(t,"strokeWidth",8,2),d=ne(t,"absoluteStrokeWidth",8,!1),u=ne(t,"iconNode",24,()=>[]);const c=(...x)=>x.filter((w,v,h)=>!!w&&h.indexOf(w)===v).join(" ");Kt();var $=Sn();Tt($,(x,w)=>({...kn,...s,width:a(),height:a(),stroke:i(),"stroke-width":x,class:w}),[()=>(Te(d()),Te(r()),Te(a()),O(()=>d()?Number(r())*24/Number(a()):r())),()=>(Te(o()),Te(n),O(()=>c("lucide-icon","lucide",o()?`lucide-${o()}`:"",n.class)))]);var m=_($);Je(m,1,u,rn,(x,w)=>{var v=pe(()=>Ya(l(w),2));let h=()=>l(v)[0],N=()=>l(v)[1];var z=U(),L=R(z);pn(L,h,!0,(E,T)=>{Tt(E,()=>({...N()}))}),k(x,z)});var g=S(m);J(g,t,"default",{}),f($),k(e,$),ke()}function ea(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];Z(e,Y({name:"activity"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function En(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m6 9 6 6 6-6"}]];Z(e,Y({name:"chevron-down"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function Cn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m9 18 6-6-6-6"}]];Z(e,Y({name:"chevron-right"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function Nn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];Z(e,Y({name:"ellipsis"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function An(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];Z(e,Y({name:"external-link"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function Tn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];Z(e,Y({name:"layers"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function Mn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];Z(e,Y({name:"monitor"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function zn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12 17v5"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"}]];Z(e,Y({name:"pin"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function ct(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];Z(e,Y({name:"power"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function Ln(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];Z(e,Y({name:"refresh-cw"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function Pn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Z(e,Y({name:"search"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}function In(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12 19h8"}],["path",{d:"m4 17 6-6-6-6"}]];Z(e,Y({name:"terminal"},()=>n,{get iconNode(){return s},children:(o,i)=>{var a=U(),r=R(a);J(r,t,"default",{}),k(o,a)},$$slots:{default:!0}}))}var On=G('<a target="_blank"> <!></a>'),Fn=G("<span> </span>"),Rn=G('<div class="menu-dropdown svelte-18fpxw1"><div class="menu-item info svelte-18fpxw1"><span class="svelte-18fpxw1"> </span> <span class="svelte-18fpxw1"> </span></div> <div class="menu-separator svelte-18fpxw1"></div> <button class="menu-action danger svelte-18fpxw1"><!> Stop</button></div>'),Dn=G('<button title="Pin to Deck"><!></button> <button class="control-btn svelte-18fpxw1" title="Restart"><!></button> <div class="menu-wrapper svelte-18fpxw1"><button class="control-btn svelte-18fpxw1" title="More"><!></button> <!></div>',1),Hn=G('<button class="control-btn power-btn svelte-18fpxw1" title="Start"><!></button>'),Gn=G('<div><div class="item-content svelte-18fpxw1"><div></div> <span class="service-name svelte-18fpxw1"> </span> <!></div> <div class="item-toolbar svelte-18fpxw1"><div class="toolbar-bg svelte-18fpxw1"></div> <div class="toolbar-actions svelte-18fpxw1"><!></div></div></div>'),Vn=G('<div><div class="group-title svelte-18fpxw1"><!> <span class="svelte-18fpxw1"> </span></div> <div class="group-actions svelte-18fpxw1"><button class="group-btn svelte-18fpxw1" title="Pin Group"><!></button> <button class="group-btn svelte-18fpxw1"><!></button></div></div> <!>',1),Bn=G('<div class="rack svelte-18fpxw1" role="application"><div class="rack-header svelte-18fpxw1"><div class="logo svelte-18fpxw1">locald</div></div> <div class="rack-list svelte-18fpxw1"></div> <div role="button" tabindex="0"><div class="status-summary svelte-18fpxw1"><!> <span class="svelte-18fpxw1">System Normal</span></div></div></div>');function Un(e,t){ye(t,!1);const n=()=>vt(jt,"$projects",s),[s,o]=Jt(),i=ze();let a=ne(t,"pinned",28,()=>[]),r=ze([]),d=ze(null),u=ze(null);function c(p){p.target instanceof HTMLInputElement||p.target instanceof HTMLTextAreaElement||(p.key==="j"||p.key==="ArrowDown"?$(1):p.key==="k"||p.key==="ArrowUp"?$(-1):p.key==="Enter"||p.key===" "?(p.preventDefault(),l(u)&&g(l(u))):p.key==="Escape"&&(a([]),j(d,null)))}function $(p){if(l(i).length===0)return;let b=-1;l(u)&&(b=l(i).findIndex(ee=>ee.name===l(u)));let C=b+p;C<0&&(C=0),C>=l(i).length&&(C=l(i).length-1),j(u,l(i)[C].name),m(l(u))}function m(p){setTimeout(()=>{const b=document.getElementById(`service-${p}`);b&&b.scrollIntoView({block:"nearest"})},0)}function g(p,b){b&&b.stopPropagation(),a().includes(p)?a(a().filter(C=>C!==p)):a([...a(),p])}function x(p,b){const C=b.map(te=>te.name),ee=C.every(te=>a().includes(te));a(ee?a().filter(te=>!C.includes(te)):[...new Set([...a(),...C])])}function w(p,b){b.stopPropagation(),j(d,l(d)===p?null:p)}function v(){j(d,null)}async function h(p){const b=p.every(C=>C.status==="stopped");try{await Promise.all(p.map(C=>b?Pt(C.name):It(C.name)))}catch(C){console.error(C)}}function N(p){l(r).includes(p)?j(r,l(r).filter(b=>b!==p)):j(r,[...l(r),p])}function z(){const p="locald";a().includes(p)?a(a().filter(b=>b!==p)):a([...a(),p])}function L(p){return p.name.includes("db")||p.name.includes("postgres")?"db":p.name.includes("redis")||p.name.includes("cache")?"cache":p.port?"web":"worker"}function E(p,b){if(p===b)return"main";if(p.startsWith(b)){const C=p.slice(b.length);return[":","-","_"].includes(C[0])?C.slice(1):C}return p}Za(()=>n(),()=>{j(i,n().flatMap(p=>p.services))}),Qa(),Kt();var T=Bn();B("keydown",ja,c);var A=S(_(T),2);Je(A,5,n,p=>p.name,(p,b)=>{const C=$e(()=>(l(r),l(b),O(()=>l(r).includes(l(b).name)))),ee=$e(()=>(l(b),O(()=>l(b).services.every(W=>W.status==="stopped"))));var te=Vn(),de=R(te);let Se;var me=_(de),Ee=_(me);{var Ie=W=>{Cn(W,{size:12})},Ye=W=>{En(W,{size:12})};se(Ee,W=>{l(C)?W(Ie):W(Ye,!1)})}var Ce=S(Ee,2),Ze=_(Ce,!0);f(Ce),f(me);var D=S(me,2),Q=_(D),ge=_(Q);Tn(ge,{size:12}),f(Q);var he=S(Q,2),Qe=_(he);{let W=$e(()=>l(ee)?"#52525b":"#ef4444");ct(Qe,{size:12,get color(){return l(W)}})}f(he),f(D),f(de);var ve=S(de,2);{var Ne=W=>{var ht=U(),ta=R(ht);Je(ta,1,()=>(l(b),O(()=>l(b).services)),je=>je.name,(je,y)=>{const Oe=$e(()=>(l(y),O(()=>L(l(y))))),aa=$e(()=>(l(y),l(b),O(()=>E(l(y).name,l(b).name))));var we=Gn();let wt;var et=_(we),$t=_(et),Fe=S($t,2),na=_(Fe,!0);f(Fe);var sa=S(Fe,2);{var ra=V=>{var I=On(),K=_(I),Re=S(K);An(Re,{size:9}),f(I),ae(()=>{Me(I,"href",(l(y),O(()=>l(y).url))),ie(I,1,`type-chip ${l(Oe)??""} interactive`,"svelte-18fpxw1"),Me(I,"title",`Open ${l(y),O(()=>l(y).url)??""}`),X(K,`${l(Oe)??""} `)}),B("click",I,tt=>tt.stopPropagation()),k(V,I)},ia=V=>{var I=Fn(),K=_(I,!0);f(I),ae(()=>{ie(I,1,`type-chip ${l(Oe)??""}`,"svelte-18fpxw1"),X(K,l(Oe))}),k(V,I)};se(sa,V=>{l(y),O(()=>l(y).url&&l(y).status==="running")?V(ra):V(ia,!1)})}f(et);var bt=S(et,2),xt=S(_(bt),2),oa=_(xt);{var la=V=>{var I=Dn(),K=R(I);let Re;var tt=_(K);Mn(tt,{size:14}),f(K);var De=S(K,2),da=_(De);Ln(da,{size:14}),f(De);var yt=S(De,2),He=_(yt),va=_(He);Nn(va,{size:14}),f(He);var ua=S(He,2);{var fa=re=>{var Ge=Rn(),at=_(Ge),nt=_(at),pa=_(nt);f(nt);var kt=S(nt,2),_a=_(kt);f(kt),f(at);var st=S(at,4),ma=_(st);ct(ma,{size:12}),oe(),f(st),f(Ge),ae(()=>{X(pa,`PID: ${l(y),O(()=>l(y).pid||"-")??""}`),X(_a,`Port: ${l(y),O(()=>l(y).port||"-")??""}`)}),B("click",st,()=>It(l(y).name)),B("click",Ge,ga=>ga.stopPropagation()),k(re,Ge)};se(ua,re=>{l(d),l(y),O(()=>l(d)===l(y).name)&&re(fa)})}f(yt),ae(re=>Re=ie(K,1,"control-btn monitor-btn svelte-18fpxw1",null,Re,re),[()=>({active:a().includes(l(y).name)})]),B("click",K,re=>g(l(y).name,re)),B("click",De,Ue(()=>bn(l(y).name))),B("click",He,re=>w(l(y).name,re)),k(V,I)},ca=V=>{var I=Hn(),K=_(I);ct(K,{size:14}),f(I),B("click",I,Ue(()=>Pt(l(y).name))),k(V,I)};se(oa,V=>{l(y),O(()=>l(y).status==="running")?V(la):V(ca,!1)})}f(xt),f(bt),f(we),ae(V=>{Me(we,"id",`service-${l(y),O(()=>l(y).name)??""}`),wt=ie(we,1,"rack-item svelte-18fpxw1",null,wt,V),ie($t,1,`status-dot ${l(y),O(()=>l(y).status)??""}`,"svelte-18fpxw1"),Me(Fe,"title",(l(y),O(()=>l(y).name))),X(na,l(aa))},[()=>({pinned:a().includes(l(y).name),focused:l(u)===l(y).name,disabled:l(y).status==="stopped"})]),B("click",we,()=>g(l(y).name)),k(je,we)}),k(W,ht)};se(ve,W=>{l(C)||W(Ne)})}ae(()=>{Se=ie(de,1,"rack-group-header svelte-18fpxw1",null,Se,{disabled:l(ee)}),X(Ze,(l(b),O(()=>l(b).name))),Me(he,"title",l(ee)?"Start Group":"Stop Group")}),B("click",me,()=>N(l(b).name)),B("click",Q,Ue(()=>x(l(b).name,l(b).services))),B("click",he,Ue(()=>h(l(b).services))),k(p,te)}),f(A);var M=S(A,2);let F;var P=_(M),fe=_(P);ea(fe,{size:16}),oe(2),f(P),f(M),f(T),ae(p=>F=ie(M,1,"rack-footer svelte-18fpxw1",null,F,p),[()=>({active:a().includes("locald")})]),B("click",M,z),B("keydown",M,p=>p.key==="Enter"&&z()),B("click",T,v),k(e,T),ke(),o()}var Wn=G('<div class="terminal-container svelte-fe92n4"></div>');function gt(e,t){ye(t,!0);let n,s,o,i=ne(t,"filter",3,null),a=ne(t,"textFilter",3,"");function r(c){let $=c.message;$=$.replace(/\x1b\[[23]J/g,""),i()||($=$.replace(/\x1b\[[\d;]*[A-HJKSTf]/g,""));const m=new Date(c.timestamp*1e3).toLocaleTimeString(),g="\x1B[38;2;113;113;122m";return i()?`${g}${m}\x1B[0m ${$}\r
`:`${g}${m}\x1B[0m \x1B[1m${c.service}\x1B[0m ${$}\r
`}function d(c,$){if(!s)return;s.clear();let m=[];c?m=St(Qt)[c]||[]:m=St(Zt);for(const g of m)(!$||g.message.toLowerCase().includes($.toLowerCase())||g.service.toLowerCase().includes($.toLowerCase()))&&s.write(r(g))}en(()=>{d(i(),a())}),pt(()=>{let c;return(async()=>{const{Terminal:$}=await At(async()=>{const{Terminal:w}=await import("../chunks/BTGVxaYV.js").then(v=>v.x);return{Terminal:w}},[],import.meta.url),{FitAddon:m}=await At(async()=>{const{FitAddon:w}=await import("../chunks/BlxrFPDK.js").then(v=>v.a);return{FitAddon:w}},[],import.meta.url);s=new $({cursorBlink:!1,theme:{background:"#09090b",foreground:"#d4d4d8"},fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace',fontSize:13,convertEol:!0,disableStdin:!0}),o=new m,s.loadAddon(o),s.open(n),o.fit(),d(i(),a());const g=Yt.subscribe(w=>{if(w&&s){const v=!i()||w.service===i(),h=!a()||w.message.toLowerCase().includes(a().toLowerCase())||w.service.toLowerCase().includes(a().toLowerCase());v&&h&&s.write(r(w))}}),x=new ResizeObserver(()=>{o.fit()});x.observe(n),c=()=>{g(),x.disconnect(),s.dispose()}})(),()=>{c&&c()}});var u=Wn();tn(u,c=>n=c,()=>n),k(e,u),ke()}var qn=G('<div class="stream svelte-15m66w8" data-testid="stream"><div class="stream-header svelte-15m66w8"><div class="search-wrapper svelte-15m66w8"><!> <input type="text" placeholder="Filter logs..." class="search-input svelte-15m66w8"/></div></div> <div class="log-container svelte-15m66w8"><!></div></div>');function Jn(e){let t=mt("");var n=qn(),s=_(n),o=_(s),i=_(o);Pn(i,{size:14,class:"search-icon"});var a=S(i,2);nn(a),f(o),f(s);var r=S(s,2),d=_(r);gt(d,{filter:null,get textFilter(){return l(t)}}),f(r),f(n),_n(a,()=>l(t),u=>j(t,u)),k(e,n)}var Kn=G('<div class="dcc svelte-dcg400" data-testid="daemon-control-center"><div class="grid svelte-dcg400"><div class="card svelte-dcg400"><div class="card-title svelte-dcg400">Connection</div> <div class="conn svelte-dcg400"><span></span> <span class="conn-text"><!></span></div> <div class="muted svelte-dcg400">This view pins the daemon as a virtual service (“System Normal”).</div></div> <div class="card svelte-dcg400"><div class="card-title svelte-dcg400">Workspace Summary</div> <div class="summary svelte-dcg400"><div class="stat svelte-dcg400"><div class="stat-num svelte-dcg400"> </div> <div class="stat-label svelte-dcg400">Projects</div></div> <div class="stat svelte-dcg400"><div class="stat-num svelte-dcg400"> </div> <div class="stat-label svelte-dcg400">Services</div></div> <div class="stat svelte-dcg400"><div class="stat-num svelte-dcg400"> </div> <div class="stat-label svelte-dcg400">Running</div></div> <div class="stat svelte-dcg400"><div class="stat-num svelte-dcg400"> </div> <div class="stat-label svelte-dcg400">Building</div></div> <div class="stat svelte-dcg400"><div class="stat-num svelte-dcg400"> </div> <div class="stat-label svelte-dcg400">Stopped</div></div></div></div></div> <div class="terminal svelte-dcg400"><div class="terminal-title svelte-dcg400">Recent activity</div> <!></div></div>');function Xn(e,t){ye(t,!0);const n=()=>vt(jt,"$projects",o),s=()=>vt(Xe,"$services",o),[o,i]=Jt();let a=mt(null),r=pe(()=>n().length),d=pe(()=>s().length),u=pe(()=>s().filter(D=>D.status==="running").length),c=pe(()=>s().filter(D=>D.status==="building").length),$=pe(()=>s().filter(D=>D.status==="stopped").length);pt(()=>{const D=()=>{if(typeof document>"u")return;const ge=document.body?.getAttribute("data-sse-connected");j(a,ge==="true"?!0:ge==="false"?!1:null,!0)};D();const Q=setInterval(D,500);return()=>clearInterval(Q)});var m=Kn(),g=_(m),x=_(g),w=S(_(x),2),v=_(w);let h;var N=S(v,2),z=_(N);{var L=D=>{var Q=rt("Connected");k(D,Q)},E=D=>{var Q=U(),ge=R(Q);{var he=ve=>{var Ne=rt("Disconnected");k(ve,Ne)},Qe=ve=>{var Ne=rt("Unknown");k(ve,Ne)};se(ge,ve=>{l(a)===!1?ve(he):ve(Qe,!1)},!0)}k(D,Q)};se(z,D=>{l(a)===!0?D(L):D(E,!1)})}f(N),f(w),oe(2),f(x);var T=S(x,2),A=S(_(T),2),M=_(A),F=_(M),P=_(F,!0);f(F),oe(2),f(M);var fe=S(M,2),p=_(fe),b=_(p,!0);f(p),oe(2),f(fe);var C=S(fe,2),ee=_(C),te=_(ee,!0);f(ee),oe(2),f(C);var de=S(C,2),Se=_(de),me=_(Se,!0);f(Se),oe(2),f(de);var Ee=S(de,2),Ie=_(Ee),Ye=_(Ie,!0);f(Ie),oe(2),f(Ee),f(A),f(T),f(g);var Ce=S(g,2),Ze=S(_(Ce),2);gt(Ze,{filter:null,textFilter:""}),f(Ce),f(m),ae(()=>{h=ie(v,1,"dot svelte-dcg400",null,h,{ok:l(a)===!0,bad:l(a)===!1}),X(P,l(r)),X(b,l(d)),X(te,l(u)),X(me,l(c)),X(Ye,l($))}),k(e,m),ke(),i()}const Yn=e=>e;function Zn(e){const t=e-1;return t*t*t+1}function Ot(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Qn(e,{delay:t=0,duration:n=400,easing:s=Yn}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:i=>`opacity: ${i*o}`}}function jn(e,{delay:t=0,duration:n=400,easing:s=Zn,x:o=0,y:i=0,opacity:a=0}={}){const r=getComputedStyle(e),d=+r.opacity,u=r.transform==="none"?"":r.transform,c=d*(1-a),[$,m]=Ot(o),[g,x]=Ot(i);return{delay:t,duration:n,easing:s,css:(w,v)=>`
			transform: ${u} translate(${(1-w)*$}${m}, ${(1-w)*g}${x});
			opacity: ${d-c*v}`}}function es(e){const t=e-1;return t*t*t+1}var ts=G('<!> <span class="term-title">Daemon Control Center</span>',1),as=G('<!> <span class="term-title"> </span>',1),ns=G('<div class="terminal-card svelte-1wq7p9j"><div class="terminal-header svelte-1wq7p9j"><div class="header-left svelte-1wq7p9j"><!></div> <div class="header-right"><button class="action-btn svelte-1wq7p9j" aria-label="Unpin"><!></button></div></div> <div class="terminal-body svelte-1wq7p9j"><!></div></div>'),ss=G('<div data-testid="deck"></div>');function rs(e,t){ye(t,!0);let n=ne(t,"pinned",31,()=>qt([]));function s(a){n(n().filter(r=>r!==a))}var o=ss();let i;Je(o,20,n,a=>a,(a,r)=>{var d=ns(),u=_(d),c=_(u),$=_(c);{var m=E=>{var T=ts(),A=R(T);ea(A,{size:14,class:"icon locald-icon"}),oe(2),k(E,T)},g=E=>{var T=as(),A=R(T);In(A,{size:14,class:"icon"});var M=S(A,2),F=_(M,!0);f(M),ae(()=>X(F,r)),k(E,T)};se($,E=>{r==="locald"?E(m):E(g,!1)})}f(c);var x=S(c,2),w=_(x);w.__click=()=>s(r);var v=_(w);zn(v,{size:14,class:"pinned-icon"}),f(w),f(x),f(u);var h=S(u,2),N=_(h);{var z=E=>{Xn(E,{})},L=E=>{gt(E,{get filter(){return r}})};se(N,E=>{r==="locald"?E(z):E(L,!1)})}f(h),f(d),Lt(1,d,()=>jn,()=>({y:20,duration:300,easing:es})),Lt(2,d,()=>Qn,()=>({duration:200})),k(a,d)}),f(o),ae(()=>i=ie(o,1,"deck svelte-1wq7p9j",null,i,{single:n().length===1})),k(e,o),ke()}ba(["click"]);var is=G('<div class="workspace svelte-1uha8ag"><!> <div class="main-view svelte-1uha8ag"><!></div></div>');function _s(e,t){ye(t,!0);let n=mt(qt([]));pt(()=>(Xe.refresh(),xn()));let s=pe(()=>l(n).length>0);var o=is(),i=_(o);Un(i,{get pinned(){return l(n)},set pinned(c){j(n,c,!0)}});var a=S(i,2),r=_(a);{var d=c=>{rs(c,{get pinned(){return l(n)},set pinned($){j(n,$,!0)}})},u=c=>{Jn(c)};se(r,c=>{l(s)?c(d):c(u,!1)})}f(a),f(o),k(e,o),ke()}export{_s as component};
