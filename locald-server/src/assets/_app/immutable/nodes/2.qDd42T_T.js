import{c as va,l as pa,m as _a,a as k,d as U,f as G,o as H,j as ma}from"../chunks/CawjGj_N.js";import{i as je}from"../chunks/DwX1LtJ9.js";import{w as Fe,d as ha,o as St,g as vt}from"../chunks/C3MvE_jc.js";import{a as Pe,H as Et,aZ as Nt,S as ve,h as F,a0 as At,I as Ie,l,at as fe,ai as ga,K as wa,U as pt,a4 as ge,e as le,J as $a,a9 as ba,R as _t,c as ue,a_ as te,b as Xe,s as ya,C as mt,ak as ce,a7 as et,aN as xa,a$ as ka,b0 as Sa,b1 as Ea,r as Tt,p as Mt,b2 as Ue,F as Ct,a2 as Na,b3 as Aa,a6 as Ta,d as Ma,G as zt,X as Lt,b4 as Ca,aK as za,ag as La,i as z,b5 as Pa,b6 as Ia,b7 as Oa,aG as Pt,ay as Fa,ab as pe,b8 as Ra,b9 as Da,al as Ha,ba as Ga,aE as Va,D as Ba,bb as qa,t as we,x as $e,y as $,n as _e,A as T,z as w,v as O,aF as Ua,bc as Wa,bd as It,be as Ot,w as j,an as Y,bf as Ja,T as Ye,g as Ka,aD as Xa,ar as Ya}from"../chunks/Tbtzkai9.js";import{l as q,p as Z,s as K,a as Za,c as Qa,i as ie,_ as ht,b as ja}from"../chunks/VPVTviwm.js";import{a as en,b as Ce,s as oe}from"../chunks/BG5Dbz2k.js";import{a as gt,b as re,s as me,r as tn}from"../chunks/Dt-yWX4h.js";import{B as an}from"../chunks/DSAeBHHp.js";function nn(e,t){return t}function rn(e,t,n){for(var r=[],i=t.length,s,a=t.length,o=0;o<i;o++){let g=t[o];Mt(g,()=>{if(s){if(s.pending.delete(g),s.done.add(g),s.pending.size===0){var p=e.outrogroups;Ze(et(s.done)),p.delete(s),p.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var d=r.length===0&&n!==null;if(d){var u=n,c=u.parentNode;Ta(c),c.append(u),e.items.clear()}Ze(t,!d)}else s={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(s)}function Ze(e,t=!0){for(var n=0;n<e.length;n++)Ma(e[n],t)}var wt;function Oe(e,t,n,r,i,s=null){var a=e,o=new Map,d=(t&Nt)!==0;if(d){var u=e;a=F?ve(At(u)):u.appendChild(Pe())}F&&Ie();var c=null,g=fe(()=>{var _=n();return xa(_)?_:_==null?[]:et(_)}),p,m=!0;function x(){f.fallback=c,sn(f,p,a,t,r),c!==null&&(p.length===0?(c.f&te)===0?Tt(c):(c.f^=te,he(c,null,a)):Mt(c,()=>{c=null}))}var h=Et(()=>{p=l(g);var _=p.length;let S=!1;if(F){var E=ga(a)===wa;E!==(_===0)&&(a=pt(),ve(a),ge(!1),S=!0)}for(var A=new Set,L=ue,P=ya(),M=0;M<_;M+=1){F&&le.nodeType===$a&&le.data===ba&&(a=le,S=!0,ge(!1));var R=p[M],V=r(R,M),I=m?null:o.get(V);I?(I.v&&_t(I.v,R),I.i&&_t(I.i,M),P&&L.skipped_effects.delete(I.e)):(I=on(o,m?a:wt??=Pe(),R,V,M,i,t,n),m||(I.e.f|=te),o.set(V,I)),A.add(V)}if(_===0&&s&&!c&&(m?c=Xe(()=>s(a)):(c=Xe(()=>s(wt??=Pe())),c.f|=te)),F&&_>0&&ve(pt()),!m)if(P){for(const[Re,v]of o)A.has(Re)||L.skipped_effects.add(v.e);L.oncommit(x),L.ondiscard(()=>{})}else x();S&&ge(!0),l(g)}),f={effect:h,items:o,outrogroups:null,fallback:c};m=!1,F&&(a=le)}function sn(e,t,n,r,i){var s=(r&Aa)!==0,a=t.length,o=e.items,d=e.effect.first,u,c=null,g,p=[],m=[],x,h,f,_;if(s)for(_=0;_<a;_+=1)x=t[_],h=i(x,_),f=o.get(h).e,(f.f&te)===0&&(f.nodes?.a?.measure(),(g??=new Set).add(f));for(_=0;_<a;_+=1){if(x=t[_],h=i(x,_),f=o.get(h).e,e.outrogroups!==null)for(const I of e.outrogroups)I.pending.delete(f),I.done.delete(f);if((f.f&te)!==0)if(f.f^=te,f===d)he(f,null,n);else{var S=c?c.next:d;f===e.effect.last&&(e.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),ne(e,c,f),ne(e,f,S),he(f,S,n),c=f,p=[],m=[],d=c.next;continue}if((f.f&Ue)!==0&&(Tt(f),s&&(f.nodes?.a?.unfix(),(g??=new Set).delete(f))),f!==d){if(u!==void 0&&u.has(f)){if(p.length<m.length){var E=m[0],A;c=E.prev;var L=p[0],P=p[p.length-1];for(A=0;A<p.length;A+=1)he(p[A],E,n);for(A=0;A<m.length;A+=1)u.delete(m[A]);ne(e,L.prev,P.next),ne(e,c,L),ne(e,P,E),d=E,c=P,_-=1,p=[],m=[]}else u.delete(f),he(f,d,n),ne(e,f.prev,f.next),ne(e,f,c===null?e.effect.first:c.next),ne(e,c,f),c=f;continue}for(p=[],m=[];d!==null&&d!==f;)(u??=new Set).add(d),m.push(d),d=d.next;if(d===null)continue}(f.f&te)===0&&p.push(f),c=f,d=f.next}if(e.outrogroups!==null){for(const I of e.outrogroups)I.pending.size===0&&(Ze(et(I.done)),e.outrogroups?.delete(I));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||u!==void 0){var M=[];if(u!==void 0)for(f of u)(f.f&Ue)===0&&M.push(f);for(;d!==null;)(d.f&Ue)===0&&d!==e.fallback&&M.push(d),d=d.next;var R=M.length;if(R>0){var V=(r&Nt)!==0&&a===0?n:null;if(s){for(_=0;_<R;_+=1)M[_].nodes?.a?.measure();for(_=0;_<R;_+=1)M[_].nodes?.a?.fix()}rn(e,M,V)}}s&&Ct(()=>{if(g!==void 0)for(f of g)f.nodes?.a?.apply()})}function on(e,t,n,r,i,s,a,o){var d=(a&ka)!==0?(a&Sa)===0?ce(n,!1,!1):mt(n):null,u=(a&Ea)!==0?mt(i):null;return{v:d,i:u,e:Xe(()=>(s(t,d??n,u??i,o),()=>{e.delete(r)}))}}function he(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,s=t&&(t.f&te)===0?t.nodes.start:n;r!==null;){var a=Na(r);if(s.before(r),r===i)return;r=a}}function ne(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function W(e,t,n,r,i){F&&Ie();var s=t.$$slots?.[n],a=!1;s===!0&&(s=t.children,a=!0),s===void 0||s(e,a?()=>r:r)}const ln=()=>performance.now(),ee={tick:e=>requestAnimationFrame(e),now:()=>ln(),tasks:new Set};function Ft(){const e=ee.now();ee.tasks.forEach(t=>{t.c(e)||(ee.tasks.delete(t),t.f())}),ee.tasks.size!==0&&ee.tick(Ft)}function cn(e){let t;return ee.tasks.size===0&&ee.tick(Ft),{promise:new Promise(n=>{ee.tasks.add(t={c:e,f:n})}),abort(){ee.tasks.delete(t)}}}function ze(e,t){Pt(()=>{e.dispatchEvent(new CustomEvent(t))})}function dn(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function $t(e){const t={},n=e.split(";");for(const r of n){const[i,s]=r.split(":");if(!i||s===void 0)break;const a=dn(i.trim());t[a]=s.trim()}return t}const fn=e=>e;function bt(e,t,n,r){var i=(e&Ia)!==0,s=(e&Oa)!==0,a=i&&s,o=(e&Pa)!==0,d=a?"both":i?"in":"out",u,c=t.inert,g=t.style.overflow,p,m;function x(){return Pt(()=>u??=n()(t,r?.()??{},{direction:d}))}var h={is_global:o,in(){if(t.inert=c,!i){m?.abort(),m?.reset?.();return}s||p?.abort(),ze(t,"introstart"),p=Qe(t,x(),m,1,()=>{ze(t,"introend"),p?.abort(),p=u=void 0,t.style.overflow=g})},out(E){if(!s){E?.(),u=void 0;return}t.inert=!0,ze(t,"outrostart"),m=Qe(t,x(),p,0,()=>{ze(t,"outroend"),E?.()})},stop:()=>{p?.abort(),m?.abort()}},f=zt;if((f.nodes.t??=[]).push(h),i&&en){var _=o;if(!_){for(var S=f.parent;S&&(S.f&Lt)!==0;)for(;(S=S.parent)&&(S.f&Ca)===0;);_=!S||(S.f&za)!==0}_&&La(()=>{z(()=>h.in())})}}function Qe(e,t,n,r,i){var s=r===1;if(Fa(t)){var a,o=!1;return Ct(()=>{if(!o){var f=t({direction:s?"in":"out"});a=Qe(e,f,n,r,i)}}),{abort:()=>{o=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n?.deactivate(),!t?.duration)return i(),{abort:pe,deactivate:pe,reset:pe,t:()=>r};const{delay:d=0,css:u,tick:c,easing:g=fn}=t;var p=[];if(s&&n===void 0&&(c&&c(0,1),u)){var m=$t(u(0,1));p.push(m,m)}var x=()=>1-r,h=e.animate(p,{duration:d,fill:"forwards"});return h.onfinish=()=>{h.cancel();var f=n?.t()??1-r;n?.abort();var _=r-f,S=t.duration*Math.abs(_),E=[];if(S>0){var A=!1;if(u)for(var L=Math.ceil(S/16.666666666666668),P=0;P<=L;P+=1){var M=f+_*g(P/L),R=$t(u(M,1-M));E.push(R),A||=R.overflow==="hidden"}A&&(e.style.overflow="hidden"),x=()=>{var V=h.currentTime;return f+_*g(V/S)},c&&cn(()=>{if(h.playState!=="running")return!1;var V=x();return c(V,1-V),!0})}h=e.animate(E,{duration:S,fill:"forwards"}),h.onfinish=()=>{x=()=>r,c?.(r,1-r),i()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=pe)},deactivate:()=>{i=pe},reset:()=>{r===0&&c?.(1,0)},t:()=>x()}}function un(e,t,n,r,i,s){let a=F;F&&Ie();var o=null;F&&le.nodeType===Ra&&(o=le,Ie());var d=F?le:e,u=new an(d,!1);Et(()=>{const c=t()||null;var g=Da;if(c===null){u.ensure(null,null),Ce(!0);return}return u.ensure(c,p=>{if(c){if(o=F?o:document.createElementNS(g,c),va(o,o),r){F&&pa(c)&&o.append(document.createComment(""));var m=F?At(o):o.appendChild(Pe());F&&(m===null?ge(!1):ve(m)),r(o,m)}zt.nodes.end=o,p.before(o)}F&&ve(p)}),Ce(!0),()=>{c&&Ce(!1)}},Lt),Ha(()=>{Ce(!0)}),a&&(ge(!0),ve(d))}function vn(e,t,n=t){var r=new WeakSet;Ga(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=We(e)?Je(s):s,n(s),ue!==null&&r.add(ue),await Va(),s!==(s=t())){var a=e.selectionStart,o=e.selectionEnd,d=e.value.length;if(e.value=s??"",o!==null){var u=e.value.length;a===o&&o===d&&u>d?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(o,u))}}}),(F&&e.defaultValue!==e.value||z(t)==null&&e.value)&&(n(We(e)?Je(e.value):e.value),ue!==null&&r.add(ue)),Ba(()=>{var i=t();if(e===document.activeElement){var s=qa??ue;if(r.has(s))return}We(e)&&i===Je(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function We(e){var t=e.type;return t==="number"||t==="range"}function Je(e){return e===""?null:+e}function Le(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}const pn=1e3,_n=5e3,Rt=Fe(null);function mn(){const{subscribe:e,update:t,set:n}=Fe([]);return{subscribe:e,set:n,addLog:r=>{t(i=>{const s=[...i,r];return s.length>_n&&s.shift(),s})},clear:()=>n([])}}const Dt=mn();function hn(){const{subscribe:e,update:t}=Fe({});return{subscribe:e,addLog:n=>{Rt.set(n),t(r=>{const s=[...r[n.service]||[],n];return s.length>pn&&s.shift(),{...r,[n.service]:s}}),Dt.addLog(n)}}}const Ht=hn();async function gn(){const e=await fetch("/api/state");if(!e.ok)throw new Error("Failed to fetch services");return e.json()}async function yt(e){if(!(await fetch(`/api/services/${e}/start`,{method:"POST"})).ok)throw new Error(`Failed to start service ${e}`)}async function xt(e){if(!(await fetch(`/api/services/${e}/stop`,{method:"POST"})).ok)throw new Error(`Failed to stop service ${e}`)}async function wn(e){if(!(await fetch(`/api/services/${e}/restart`,{method:"POST"})).ok)throw new Error(`Failed to restart service ${e}`)}function $n(){const e=new EventSource("/api/events");return e.onmessage=t=>{try{const n=JSON.parse(t.data);n.type==="Log"?Ht.addLog(n.data):n.type==="ServiceUpdate"&&(console.log("Received ServiceUpdate:",n.data.name,n.data.status),tt.updateService(n.data))}catch(n){console.error("Failed to parse event",n)}},e.onopen=()=>{console.log("EventSource connected"),typeof document<"u"&&document.body.setAttribute("data-sse-connected","true")},e.onerror=t=>{console.error("EventSource error",t),typeof document<"u"&&document.body.setAttribute("data-sse-connected","false")},()=>{e.close()}}function bn(){const{subscribe:e,set:t,update:n}=Fe([]);return{subscribe:e,set:t,update:n,refresh:async()=>{const r=await gn();t(r)},updateService:r=>{n(i=>{const s=i.findIndex(a=>a.name===r.name);if(s!==-1){const a=[...i];return a[s]=r,a}else return[...i,r].sort((o,d)=>o.name.localeCompare(d.name))})},handleEvent:r=>{if(r.type==="ServiceUpdate"){const i=r.data;n(s=>{const a=s.findIndex(o=>o.name===i.name);if(a!==-1){const o=[...s],d=o[a];return o[a]={...i,metrics:d.metrics,cpu_history:d.cpu_history},o}else return[...s,i].sort((d,u)=>d.name.localeCompare(u.name))})}else if(r.type==="Metrics"){const i=r.data;n(s=>{const a=s.findIndex(o=>o.name===i.name);if(a!==-1){const o=[...s],d=o[a],u=d.cpu_history?[...d.cpu_history]:Array(20).fill(0);return u.push(i.cpu_percent),u.length>20&&u.shift(),o[a]={...d,metrics:i,cpu_history:u},o}return s})}}}}const tt=bn(),yn=ha(tt,e=>{const t={};for(const n of e){const r=n.name.split(":"),i=r.length>1?r[0]:"default";t[i]||(t[i]=[]),t[i].push(n)}return Object.entries(t).map(([n,r])=>({name:n,services:r}))});const xn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var kn=_a("<svg><!><!></svg>");function X(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]),r=q(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);we(t,!1);let i=Z(t,"name",8,void 0),s=Z(t,"color",8,"currentColor"),a=Z(t,"size",8,24),o=Z(t,"strokeWidth",8,2),d=Z(t,"absoluteStrokeWidth",8,!1),u=Z(t,"iconNode",24,()=>[]);const c=(...x)=>x.filter((h,f,_)=>!!h&&_.indexOf(h)===f).join(" ");je();var g=kn();gt(g,(x,h)=>({...xn,...r,width:a(),height:a(),stroke:s(),"stroke-width":x,class:h}),[()=>(_e(d()),_e(o()),_e(a()),z(()=>d()?Number(o())*24/Number(a()):o())),()=>(_e(i()),_e(n),z(()=>c("lucide-icon","lucide",i()?`lucide-${i()}`:"",n.class)))]);var p=$(g);Oe(p,1,u,nn,(x,h)=>{var f=Ua(()=>Wa(l(h),2));let _=()=>l(f)[0],S=()=>l(f)[1];var E=U(),A=O(E);un(A,_,!0,(L,P)=>{gt(L,()=>({...S()}))}),k(x,E)});var m=T(p);W(m,t,"default",{}),w(g),k(e,g),$e()}function Gt(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];X(e,K({name:"activity"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Sn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m6 9 6 6 6-6"}]];X(e,K({name:"chevron-down"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function En(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m9 18 6-6-6-6"}]];X(e,K({name:"chevron-right"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Nn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];X(e,K({name:"ellipsis"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function An(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];X(e,K({name:"external-link"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Tn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];X(e,K({name:"layers"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Mn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];X(e,K({name:"monitor"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Cn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 17v5"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"}]];X(e,K({name:"pin"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Ke(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];X(e,K({name:"power"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function zn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];X(e,K({name:"refresh-cw"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Ln(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];X(e,K({name:"search"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}function Pn(e,t){const n=q(t,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 19h8"}],["path",{d:"m4 17 6-6-6-6"}]];X(e,K({name:"terminal"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=U(),o=O(a);W(o,t,"default",{}),k(i,a)},$$slots:{default:!0}}))}var In=G('<a target="_blank"> <!></a>'),On=G("<span> </span>"),Fn=G('<div class="menu-dropdown svelte-18fpxw1"><div class="menu-item info svelte-18fpxw1"><span class="svelte-18fpxw1"> </span> <span class="svelte-18fpxw1"> </span></div> <div class="menu-separator svelte-18fpxw1"></div> <button class="menu-action danger svelte-18fpxw1"><!> Stop</button></div>'),Rn=G('<button title="Pin to Deck"><!></button> <button class="control-btn svelte-18fpxw1" title="Restart"><!></button> <div class="menu-wrapper svelte-18fpxw1"><button class="control-btn svelte-18fpxw1" title="More"><!></button> <!></div>',1),Dn=G('<button class="control-btn power-btn svelte-18fpxw1" title="Start"><!></button>'),Hn=G('<div><div class="item-content svelte-18fpxw1"><div></div> <span class="service-name svelte-18fpxw1"> </span> <!></div> <div class="item-toolbar svelte-18fpxw1"><div class="toolbar-bg svelte-18fpxw1"></div> <div class="toolbar-actions svelte-18fpxw1"><!></div></div></div>'),Gn=G('<div><div class="group-title svelte-18fpxw1"><!> <span class="svelte-18fpxw1"> </span></div> <div class="group-actions svelte-18fpxw1"><button class="group-btn svelte-18fpxw1" title="Pin Group"><!></button> <button class="group-btn svelte-18fpxw1"><!></button></div></div> <!>',1),Vn=G('<div class="rack svelte-18fpxw1" role="application"><div class="rack-header svelte-18fpxw1"><div class="logo svelte-18fpxw1">locald</div></div> <div class="rack-list svelte-18fpxw1"></div> <div role="button" tabindex="0"><div class="status-summary svelte-18fpxw1"><!> <span class="svelte-18fpxw1">System Normal</span></div></div></div>');function Bn(e,t){we(t,!1);const n=()=>Qa(yn,"$projects",r),[r,i]=Za(),s=ce();let a=Z(t,"pinned",28,()=>[]),o=ce([]),d=ce(null),u=ce(null);function c(v){v.target instanceof HTMLInputElement||v.target instanceof HTMLTextAreaElement||(v.key==="j"||v.key==="ArrowDown"?g(1):v.key==="k"||v.key==="ArrowUp"?g(-1):v.key==="Enter"||v.key===" "?(v.preventDefault(),l(u)&&m(l(u))):v.key==="Escape"&&(a([]),Y(d,null)))}function g(v){if(l(s).length===0)return;let b=-1;l(u)&&(b=l(s).findIndex(se=>se.name===l(u)));let N=b+v;N<0&&(N=0),N>=l(s).length&&(N=l(s).length-1),Y(u,l(s)[N].name),p(l(u))}function p(v){setTimeout(()=>{const b=document.getElementById(`service-${v}`);b&&b.scrollIntoView({block:"nearest"})},0)}function m(v,b){b&&b.stopPropagation(),a().includes(v)?a(a().filter(N=>N!==v)):a([...a(),v])}function x(v,b){const N=b.map(ae=>ae.name),se=N.every(ae=>a().includes(ae));a(se?a().filter(ae=>!N.includes(ae)):[...new Set([...a(),...N])])}function h(v,b){b.stopPropagation(),Y(d,l(d)===v?null:v)}function f(){Y(d,null)}async function _(v){const b=v.every(N=>N.status==="stopped");try{await Promise.all(v.map(N=>b?yt(N.name):xt(N.name)))}catch(N){console.error(N)}}function S(v){l(o).includes(v)?Y(o,l(o).filter(b=>b!==v)):Y(o,[...l(o),v])}function E(){const v="locald";a().includes(v)?a(a().filter(b=>b!==v)):a([...a(),v])}function A(v){return v.name.includes("db")||v.name.includes("postgres")?"db":v.name.includes("redis")||v.name.includes("cache")?"cache":v.port?"web":"worker"}function L(v,b){if(v===b)return"main";if(v.startsWith(b)){const N=v.slice(b.length);return[":","-","_"].includes(N[0])?N.slice(1):N}return v}It(()=>n(),()=>{Y(s,n().flatMap(v=>v.services))}),Ot(),je();var P=Vn();H("keydown",Ja,c);var M=T($(P),2);Oe(M,5,n,v=>v.name,(v,b)=>{const N=fe(()=>(l(o),l(b),z(()=>l(o).includes(l(b).name)))),se=fe(()=>(l(b),z(()=>l(b).services.every(B=>B.status==="stopped"))));var ae=Gn(),be=O(ae);let at;var ye=$(be),nt=$(ye);{var Bt=B=>{En(B,{size:12})},qt=B=>{Sn(B,{size:12})};ie(nt,B=>{l(N)?B(Bt):B(qt,!1)})}var rt=T(nt,2),Ut=$(rt,!0);w(rt),w(ye);var st=T(ye,2),xe=$(st),Wt=$(xe);Tn(Wt,{size:12}),w(xe);var ke=T(xe,2),Jt=$(ke);{let B=fe(()=>l(se)?"#52525b":"#ef4444");Ke(Jt,{size:12,get color(){return l(B)}})}w(ke),w(st),w(be);var Kt=T(be,2);{var Xt=B=>{var ot=U(),Yt=O(ot);Oe(Yt,1,()=>(l(b),z(()=>l(b).services)),De=>De.name,(De,y)=>{const Se=fe(()=>(l(y),z(()=>A(l(y))))),Zt=fe(()=>(l(y),l(b),z(()=>L(l(y).name,l(b).name))));var de=Hn();let it;var He=$(de),lt=$(He),Ee=T(lt,2),Qt=$(Ee,!0);w(Ee);var jt=T(Ee,2);{var ea=D=>{var C=In(),J=$(C),Ne=T(J);An(Ne,{size:9}),w(C),j(()=>{me(C,"href",(l(y),z(()=>l(y).url))),re(C,1,`type-chip ${l(Se)??""} interactive`,"svelte-18fpxw1"),me(C,"title",`Open ${l(y),z(()=>l(y).url)??""}`),oe(J,`${l(Se)??""} `)}),H("click",C,Ge=>Ge.stopPropagation()),k(D,C)},ta=D=>{var C=On(),J=$(C,!0);w(C),j(()=>{re(C,1,`type-chip ${l(Se)??""}`,"svelte-18fpxw1"),oe(J,l(Se))}),k(D,C)};ie(jt,D=>{l(y),z(()=>l(y).url&&l(y).status==="running")?D(ea):D(ta,!1)})}w(He);var ct=T(He,2),dt=T($(ct),2),aa=$(dt);{var na=D=>{var C=Rn(),J=O(C);let Ne;var Ge=$(J);Mn(Ge,{size:14}),w(J);var Ae=T(J,2),sa=$(Ae);zn(sa,{size:14}),w(Ae);var ft=T(Ae,2),Te=$(ft),oa=$(Te);Nn(oa,{size:14}),w(Te);var ia=T(Te,2);{var la=Q=>{var Me=Fn(),Ve=$(Me),Be=$(Ve),ca=$(Be);w(Be);var ut=T(Be,2),da=$(ut);w(ut),w(Ve);var qe=T(Ve,4),fa=$(qe);Ke(fa,{size:12}),Ye(),w(qe),w(Me),j(()=>{oe(ca,`PID: ${l(y),z(()=>l(y).pid||"-")??""}`),oe(da,`Port: ${l(y),z(()=>l(y).port||"-")??""}`)}),H("click",qe,()=>xt(l(y).name)),H("click",Me,ua=>ua.stopPropagation()),k(Q,Me)};ie(ia,Q=>{l(d),l(y),z(()=>l(d)===l(y).name)&&Q(la)})}w(ft),j(Q=>Ne=re(J,1,"control-btn monitor-btn svelte-18fpxw1",null,Ne,Q),[()=>({active:a().includes(l(y).name)})]),H("click",J,Q=>m(l(y).name,Q)),H("click",Ae,Le(()=>wn(l(y).name))),H("click",Te,Q=>h(l(y).name,Q)),k(D,C)},ra=D=>{var C=Dn(),J=$(C);Ke(J,{size:14}),w(C),H("click",C,Le(()=>yt(l(y).name))),k(D,C)};ie(aa,D=>{l(y),z(()=>l(y).status==="running")?D(na):D(ra,!1)})}w(dt),w(ct),w(de),j(D=>{me(de,"id",`service-${l(y),z(()=>l(y).name)??""}`),it=re(de,1,"rack-item svelte-18fpxw1",null,it,D),re(lt,1,`status-dot ${l(y),z(()=>l(y).status)??""}`,"svelte-18fpxw1"),me(Ee,"title",(l(y),z(()=>l(y).name))),oe(Qt,l(Zt))},[()=>({pinned:a().includes(l(y).name),focused:l(u)===l(y).name,disabled:l(y).status==="stopped"})]),H("click",de,()=>m(l(y).name)),k(De,de)}),k(B,ot)};ie(Kt,B=>{l(N)||B(Xt)})}j(()=>{at=re(be,1,"rack-group-header svelte-18fpxw1",null,at,{disabled:l(se)}),oe(Ut,(l(b),z(()=>l(b).name))),me(ke,"title",l(se)?"Start Group":"Stop Group")}),H("click",ye,()=>S(l(b).name)),H("click",xe,Le(()=>x(l(b).name,l(b).services))),H("click",ke,Le(()=>_(l(b).services))),k(v,ae)}),w(M);var R=T(M,2);let V;var I=$(R),Re=$(I);Gt(Re,{size:16}),Ye(2),w(I),w(R),w(P),j(v=>V=re(R,1,"rack-footer svelte-18fpxw1",null,V,v),[()=>({active:a().includes("locald")})]),H("click",R,E),H("keydown",R,v=>v.key==="Enter"&&E()),H("click",P,f),k(e,P),$e(),i()}var qn=G('<div class="terminal-container svelte-fe92n4"></div>');function Vt(e,t){we(t,!0);let n,r,i,s=Z(t,"filter",3,null),a=Z(t,"textFilter",3,"");function o(c){let g=c.message;g=g.replace(/\x1b\[[23]J/g,""),s()||(g=g.replace(/\x1b\[[\d;]*[A-HJKSTf]/g,""));const p=new Date(c.timestamp*1e3).toLocaleTimeString(),m="\x1B[38;2;113;113;122m";return s()?`${m}${p}\x1B[0m ${g}\r
`:`${m}${p}\x1B[0m \x1B[1m${c.service}\x1B[0m ${g}\r
`}function d(c,g){if(!r)return;r.clear();let p=[];c?p=vt(Ht)[c]||[]:p=vt(Dt);for(const m of p)(!g||m.message.toLowerCase().includes(g.toLowerCase())||m.service.toLowerCase().includes(g.toLowerCase()))&&r.write(o(m))}Ka(()=>{d(s(),a())}),St(()=>{let c;return(async()=>{const{Terminal:g}=await ht(async()=>{const{Terminal:h}=await import("../chunks/BTGVxaYV.js").then(f=>f.x);return{Terminal:h}},[],import.meta.url),{FitAddon:p}=await ht(async()=>{const{FitAddon:h}=await import("../chunks/BlxrFPDK.js").then(f=>f.a);return{FitAddon:h}},[],import.meta.url);r=new g({cursorBlink:!0,theme:{background:"#09090b",foreground:"#d4d4d8"},fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace',fontSize:13,convertEol:!0,disableStdin:!0}),i=new p,r.loadAddon(i),r.open(n),i.fit(),d(s(),a());const m=Rt.subscribe(h=>{if(h&&r){const f=!s()||h.service===s(),_=!a()||h.message.toLowerCase().includes(a().toLowerCase())||h.service.toLowerCase().includes(a().toLowerCase());f&&_&&r.write(o(h))}}),x=new ResizeObserver(()=>{i.fit()});x.observe(n),c=()=>{m(),x.disconnect(),r.dispose()}})(),()=>{c&&c()}});var u=qn();ja(u,c=>n=c,()=>n),k(e,u),$e()}var Un=G('<div class="stream svelte-15m66w8"><div class="stream-header svelte-15m66w8"><div class="search-wrapper svelte-15m66w8"><!> <input type="text" placeholder="Filter logs..." class="search-input svelte-15m66w8"/></div></div> <div class="log-container svelte-15m66w8"><!></div></div>');function Wn(e){let t=Xa("");var n=Un(),r=$(n),i=$(r),s=$(i);Ln(s,{size:14,class:"search-icon"});var a=T(s,2);tn(a),w(i),w(r);var o=T(r,2),d=$(o);Vt(d,{filter:null,get textFilter(){return l(t)}}),w(o),w(n),vn(a,()=>l(t),u=>Y(t,u)),k(e,n)}const Jn=e=>e;function Kn(e){const t=e-1;return t*t*t+1}function kt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Xn(e,{delay:t=0,duration:n=400,easing:r=Jn}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function Yn(e,{delay:t=0,duration:n=400,easing:r=Kn,x:i=0,y:s=0,opacity:a=0}={}){const o=getComputedStyle(e),d=+o.opacity,u=o.transform==="none"?"":o.transform,c=d*(1-a),[g,p]=kt(i),[m,x]=kt(s);return{delay:t,duration:n,easing:r,css:(h,f)=>`
			transform: ${u} translate(${(1-h)*g}${p}, ${(1-h)*m}${x});
			opacity: ${d-c*f}`}}function Zn(e){const t=e-1;return t*t*t+1}var Qn=G('<!> <span class="term-title">Daemon Control Center</span>',1),jn=G('<!> <span class="term-title"> </span>',1),er=G('<div class="terminal-card svelte-1wq7p9j"><div class="terminal-header svelte-1wq7p9j"><div class="header-left svelte-1wq7p9j"><!></div> <div class="header-right"><button class="action-btn svelte-1wq7p9j" aria-label="Unpin"><!></button></div></div> <div class="terminal-body svelte-1wq7p9j"><!></div></div>'),tr=G("<div></div>");function ar(e,t){we(t,!0);let n=Z(t,"pinned",31,()=>Ya([]));function r(a){n(n().filter(o=>o!==a))}var i=tr();let s;Oe(i,20,n,a=>a,(a,o)=>{var d=er(),u=$(d),c=$(u),g=$(c);{var p=E=>{var A=Qn(),L=O(A);Gt(L,{size:14,class:"icon locald-icon"}),Ye(2),k(E,A)},m=E=>{var A=jn(),L=O(A);Pn(L,{size:14,class:"icon"});var P=T(L,2),M=$(P,!0);w(P),j(()=>oe(M,o)),k(E,A)};ie(g,E=>{o==="locald"?E(p):E(m,!1)})}w(c);var x=T(c,2),h=$(x);h.__click=()=>r(o);var f=$(h);Cn(f,{size:14,class:"pinned-icon"}),w(h),w(x),w(u);var _=T(u,2),S=$(_);Vt(S,{get filter(){return o}}),w(_),w(d),bt(1,d,()=>Yn,()=>({y:20,duration:300,easing:Zn})),bt(2,d,()=>Xn,()=>({duration:200})),k(a,d)}),w(i),j(()=>s=re(i,1,"deck svelte-1wq7p9j",null,s,{single:n().length===1})),k(e,i),$e()}ma(["click"]);var nr=G('<div class="workspace svelte-1uha8ag"><!> <div class="main-view svelte-1uha8ag"><!></div></div>');function ur(e,t){we(t,!1);const n=ce();let r=ce([]);St(()=>(tt.refresh(),$n())),It(()=>l(r),()=>{Y(n,l(r).length>0)}),Ot(),je();var i=nr(),s=$(i);Bn(s,{get pinned(){return l(r)},set pinned(c){Y(r,c)},$$legacy:!0});var a=T(s,2),o=$(a);{var d=c=>{ar(c,{get pinned(){return l(r)},set pinned(g){Y(r,g)},$$legacy:!0})},u=c=>{Wn(c)};ie(o,c=>{l(n)?c(d):c(u,!1)})}w(a),w(i),k(e,i),$e()}export{ur as component};
